<svg viewBox="0 0 1200 630" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="bg" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#0b1220" />
      <stop offset="100%" stop-color="#0a1a2b" />
    </linearGradient>
    <linearGradient id="accent" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#22d3ee" />
      <stop offset="100%" stop-color="#38bdf8" />
    </linearGradient>
    <pattern id="grid" width="36" height="36" patternUnits="userSpaceOnUse">
      <path d="M 36 0 L 0 0 0 36" fill="none" stroke="#1f2a44" stroke-width="1"/>
    </pattern>
    <filter id="softGlow" x="-30%" y="-30%" width="160%" height="160%">
      <feGaussianBlur stdDeviation="8" result="blur"/>
      <feColorMatrix in="blur" type="matrix"
        values="1 0 0 0 0
                0 1 0 0 0
                0 0 1 0 0
                0 0 0 0.55 0"/>
      <feMerge>
        <feMergeNode/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    <style>
      /* Avoid CSS variables for renderer compatibility */
      .title { font: 700 54px ui-sans-serif, -apple-system, system-ui, sans-serif; fill: #f8fafc; }
      .subtitle { font: 500 26px ui-sans-serif, -apple-system, system-ui, sans-serif; fill: #a5f3fc; }
      .label { font: 600 16px ui-sans-serif, -apple-system, system-ui, sans-serif; fill: #e2e8f0; }
      .mono { font: 600 14px ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace; fill: #a5f3fc; }
    </style>
  </defs>

  <rect width="1200" height="630" fill="url(#bg)"/>
  <rect width="1200" height="630" fill="url(#grid)" opacity="0.28"/>

  <!-- Decorative rings -->
  <g opacity="0.6">
    <circle cx="1000" cy="140" r="130" fill="none" stroke="#0ea5e9" stroke-width="2" opacity="0.25"/>
    <circle cx="1000" cy="140" r="90" fill="none" stroke="#22d3ee" stroke-width="2" opacity="0.25"/>
  </g>

  <!-- Diagram cluster -->
  <g transform="translate(120, 170)">
    <!-- HSM block -->
    <g filter="url(#softGlow)">
      <rect x="0" y="0" width="310" height="210" rx="14" fill="#0b2a3a" stroke="url(#accent)" stroke-width="3"/>
      <rect x="22" y="26" width="266" height="56" rx="10" fill="#071726" stroke="#1e293b"/>
      <text x="155" y="62" class="mono" text-anchor="middle">HSM</text>
      <text x="155" y="82" class="mono" text-anchor="middle" opacity="0.85">Hardware Security Module</text>
      <text x="155" y="120" class="label" text-anchor="middle" opacity="0.9">Private key stays inside</text>
      <rect x="22" y="142" width="266" height="46" rx="10" fill="#071726" stroke="#1e293b"/>
      <text x="155" y="171" class="mono" text-anchor="middle" opacity="0.85">Ed25519 signing</text>
    </g>

    <!-- Arrow to signers -->
    <path d="M 330 105 C 380 105, 410 105, 450 105" fill="none" stroke="#38bdf8" stroke-width="4" opacity="0.8"/>
    <path d="M 450 105 l -14 -8 l 0 16 z" fill="#38bdf8" opacity="0.9"/>

    <!-- 5 signers -->
    <g transform="translate(470, 18)">
      <text x="140" y="-8" class="label" text-anchor="middle" opacity="0.85">3-trên-5</text>

      <!-- helper function via manual placement -->
      <g>
        <circle cx="50" cy="50" r="28" fill="#0b1220" stroke="#64748b" stroke-width="2"/>
        <text x="50" y="55" class="mono" text-anchor="middle" opacity="0.9">S1</text>
      </g>
      <g>
        <circle cx="160" cy="50" r="28" fill="#0b1220" stroke="#22d3ee" stroke-width="3"/>
        <text x="160" y="55" class="mono" text-anchor="middle">S2</text>
      </g>
      <g>
        <circle cx="270" cy="50" r="28" fill="#0b1220" stroke="#22d3ee" stroke-width="3"/>
        <text x="270" y="55" class="mono" text-anchor="middle">S3</text>
      </g>
      <g>
        <circle cx="105" cy="140" r="28" fill="#0b1220" stroke="#22d3ee" stroke-width="3"/>
        <text x="105" y="145" class="mono" text-anchor="middle">S4</text>
      </g>
      <g>
        <circle cx="215" cy="140" r="28" fill="#0b1220" stroke="#64748b" stroke-width="2"/>
        <text x="215" y="145" class="mono" text-anchor="middle" opacity="0.9">S5</text>
      </g>

      <!-- Gate -->
      <g transform="translate(310, 90)">
        <path d="M 0 0 C 60 0, 80 0, 120 0" fill="none" stroke="#22d3ee" stroke-width="4" opacity="0.75"/>
        <path d="M 120 0 l -14 -8 l 0 16 z" fill="#22d3ee" opacity="0.85"/>
      </g>
      <g transform="translate(455, 70)" filter="url(#softGlow)">
        <rect x="0" y="0" width="140" height="70" rx="12" fill="#052033" stroke="#22d3ee" stroke-width="2" opacity="0.95"/>
        <text x="70" y="28" class="label" text-anchor="middle">Release</text>
        <text x="70" y="52" class="mono" text-anchor="middle" opacity="0.95">allowed</text>
      </g>
    </g>
  </g>

  <!-- Title / subtitle -->
  <text x="600" y="86" class="title" text-anchor="middle">HSM &amp; 3-trên-5</text>
  <text x="600" y="128" class="subtitle" text-anchor="middle">Biến code signing thành quy trình</text>

  <!-- Bottom accent line -->
  <rect x="270" y="570" width="660" height="4" fill="url(#accent)" opacity="0.7"/>
</svg>
